<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>App Shell Layout Organism</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
  
  <style>
    /* -------------------------------------------------------------------------- */
    /* 1. DESIGN TOKENS                                                           */
    /* -------------------------------------------------------------------------- */
    :root {
      /* Colors */
      --color-primary-50: #eef2ff;
      --color-primary-100: #e0e7ff;
      --color-primary-500: #6366f1;
      --color-primary-600: #4f46e5;
      --color-primary-700: #4338ca;
      
      --color-white: #ffffff;
      --color-gray-50: #f8fafc;
      --color-gray-100: #f1f5f9;
      --color-gray-200: #e2e8f0;
      --color-gray-300: #cbd5e1;
      --color-gray-400: #94a3b8;
      --color-gray-500: #64748b;
      --color-gray-600: #475569;
      --color-gray-700: #334155;
      --color-gray-800: #1e293b;
      --color-gray-900: #0f172a;

      /* Dimensions */
      --sidebar-width: 256px;
      --sidebar-collapsed-width: 64px;
      --header-height: 64px;

      /* Spacing */
      --spacing-1: 4px;
      --spacing-2: 8px;
      --spacing-3: 12px;
      --spacing-4: 16px;
      --spacing-6: 24px;
      --spacing-8: 32px;

      /* UI */
      --radius-md: 6px;
      --radius-lg: 8px;
      --radius-full: 9999px;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
      
      /* Typography */
      --font-primary: 'Inter', sans-serif;
      --text-xs: 0.75rem;
      --text-sm: 0.875rem;
      --text-base: 1rem;
      --text-lg: 1.125rem;
      --text-xl: 1.25rem;

      /* Z-Index */
      --z-header: 100;
      --z-sidebar: 200;
      --z-overlay: 150;
      --z-skip-link: 9999;
    }

    /* -------------------------------------------------------------------------- */
    /* 2. RESET & BASE                                                            */
    /* -------------------------------------------------------------------------- */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: var(--font-primary);
      background-color: var(--color-gray-50);
      color: var(--color-gray-900);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      height: 100vh;
      overflow: hidden; /* App Shell handles scrolling */
    }

    button { font-family: inherit; }

    /* Accessibility: Skip Link */
    .skip-link {
      position: absolute;
      top: -9999px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--color-primary-600);
      color: var(--color-white);
      padding: var(--spacing-3) var(--spacing-6);
      border-radius: 0 0 var(--radius-md) var(--radius-md);
      z-index: var(--z-skip-link);
      text-decoration: none;
      font-weight: 500;
      transition: top 0.2s;
    }
    .skip-link:focus { top: 0; outline: 2px solid var(--color-white); }

    /* -------------------------------------------------------------------------- */
    /* 3. APP SHELL GRID LAYOUT                                                   */
    /* -------------------------------------------------------------------------- */
    .app-shell {
      display: grid;
      grid-template-columns: var(--sidebar-width) 1fr;
      grid-template-rows: var(--header-height) 1fr;
      grid-template-areas: 
        "sidebar header"
        "sidebar main";
      height: 100vh;
      width: 100vw;
      transition: grid-template-columns 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Collapsed State (Desktop) */
    .app-shell--collapsed {
      grid-template-columns: var(--sidebar-collapsed-width) 1fr;
    }

    /* -------------------------------------------------------------------------- */
    /* 4. SIDEBAR COMPONENT                                                       */
    /* -------------------------------------------------------------------------- */
    .app-sidebar {
      grid-area: sidebar;
      background-color: var(--color-white);
      border-right: 1px solid var(--color-gray-200);
      display: flex;
      flex-direction: column;
      z-index: var(--z-sidebar);
      overflow-y: auto;
      overflow-x: hidden;
      transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .app-sidebar__header {
      height: var(--header-height);
      display: flex;
      align-items: center;
      padding: 0 var(--spacing-4);
      border-bottom: 1px solid var(--color-gray-100);
      flex-shrink: 0;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      font-weight: 700;
      font-size: var(--text-lg);
      color: var(--color-primary-600);
      text-decoration: none;
      white-space: nowrap;
      overflow: hidden;
    }

    .logo__icon { width: 32px; height: 32px; background: var(--color-primary-600); border-radius: var(--radius-md); flex-shrink: 0; }

    .app-sidebar__nav {
      flex: 1;
      padding: var(--spacing-4) var(--spacing-2);
      display: flex;
      flex-direction: column;
      gap: var(--spacing-1);
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
      padding: var(--spacing-2) var(--spacing-3);
      color: var(--color-gray-600);
      text-decoration: none;
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      font-weight: 500;
      transition: all 0.2s;
      white-space: nowrap;
      overflow: hidden;
    }

    .nav-item:hover {
      background-color: var(--color-gray-50);
      color: var(--color-gray-900);
    }

    .nav-item--active {
      background-color: var(--color-primary-50);
      color: var(--color-primary-700);
    }

    .nav-item__icon {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      stroke-width: 2;
    }

    .app-sidebar__footer {
      padding: var(--spacing-4);
      border-top: 1px solid var(--color-gray-200);
      flex-shrink: 0;
    }

    /* Collapsed Sidebar overrides */
    .app-shell--collapsed .app-sidebar__header { padding: 0; justify-content: center; }
    .app-shell--collapsed .logo span { display: none; }
    .app-shell--collapsed .nav-item { justify-content: center; padding: var(--spacing-2); }
    .app-shell--collapsed .nav-item span { display: none; }
    .app-shell--collapsed .app-sidebar__footer { padding: var(--spacing-2); display: flex; justify-content: center; }
    .app-shell--collapsed .account-switcher__info { display: none; }
    .app-shell--collapsed .account-switcher__trigger { padding: 0; width: auto; }
    .app-shell--collapsed .account-switcher__trigger svg { display: none; }

    /* -------------------------------------------------------------------------- */
    /* 5. HEADER COMPONENT                                                        */
    /* -------------------------------------------------------------------------- */
    .app-header {
      grid-area: header;
      background-color: var(--color-white);
      border-bottom: 1px solid var(--color-gray-200);
      height: var(--header-height);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 var(--spacing-6);
      position: sticky;
      top: 0;
      z-index: var(--z-header);
    }

    .app-header__left {
      display: flex;
      align-items: center;
      gap: var(--spacing-4);
    }

    .menu-trigger {
      display: none; /* Hidden on desktop by default */
      background: none;
      border: none;
      cursor: pointer;
      color: var(--color-gray-500);
      padding: var(--spacing-1);
      border-radius: var(--radius-md);
    }
    .menu-trigger:hover { background-color: var(--color-gray-100); }

    .collapse-trigger {
      background: none;
      border: none;
      cursor: pointer;
      color: var(--color-gray-500);
      padding: var(--spacing-1);
      border-radius: var(--radius-md);
      display: flex;
    }
    .collapse-trigger:hover { color: var(--color-primary-600); background-color: var(--color-primary-50); }

    .app-header__search {
      width: 320px;
    }

    .app-header__actions {
      display: flex;
      align-items: center;
      gap: var(--spacing-4);
    }

    .action-btn {
      position: relative;
      background: none;
      border: none;
      cursor: pointer;
      color: var(--color-gray-500);
      padding: var(--spacing-2);
      border-radius: var(--radius-full);
      transition: color 0.2s;
    }
    .action-btn:hover { color: var(--color-gray-700); background: var(--color-gray-100); }
    
    .notification-badge {
      position: absolute;
      top: 4px;
      right: 4px;
      width: 8px;
      height: 8px;
      background-color: var(--color-error);
      border-radius: 50%;
      border: 1px solid var(--color-white);
    }

    /* -------------------------------------------------------------------------- */
    /* 6. MAIN CONTENT                                                            */
    /* -------------------------------------------------------------------------- */
    .app-main {
      grid-area: main;
      padding: var(--spacing-6);
      overflow-y: auto;
      scroll-behavior: smooth;
      background-color: var(--color-gray-50);
    }

    .content-container {
      max-width: 1280px; /* Max width for content readability */
      margin: 0 auto;
    }

    /* -------------------------------------------------------------------------- */
    /* 7. RESPONSIVE BEHAVIOR (Mobile/Tablet)                                     */
    /* -------------------------------------------------------------------------- */
    @media (max-width: 1024px) {
      /* Change Grid to single column */
      .app-shell {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "header"
          "main";
      }

      /* Header Adjustments */
      .app-header { padding: 0 var(--spacing-4); }
      .collapse-trigger { display: none; } /* Hide desktop collapse btn */
      .menu-trigger { display: block; } /* Show mobile hamburger */
      
      /* Sidebar becomes Drawer */
      .app-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 280px;
        transform: translateX(-100%); /* Hidden by default */
        box-shadow: var(--shadow-lg);
        border-right: none;
      }

      .app-shell--mobile-open .app-sidebar {
        transform: translateX(0);
      }

      /* Overlay */
      .app-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(15, 23, 42, 0.5); /* gray-900 with opacity */
        z-index: var(--z-overlay);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s;
        backdrop-filter: blur(2px);
      }

      .app-shell--mobile-open .app-overlay {
        opacity: 1;
        pointer-events: auto;
      }
      
      /* Search on mobile */
      .app-header__search { display: none; } /* Simplified for demo, could be an icon toggle */
    }

    /* -------------------------------------------------------------------------- */
    /* 8. ATOM/MOLECULE DEPENDENCIES (Simplified inline)                          */
    /* -------------------------------------------------------------------------- */
    /* SVG Icons */
    .icon { width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
    
    /* Search Input Molecule (Simplified) */
    .search-input {
      position: relative;
      display: flex;
      align-items: center;
    }
    .search-input input {
      width: 100%;
      padding: 8px 12px 8px 36px;
      border: 1px solid var(--color-gray-200);
      border-radius: var(--radius-md);
      background: var(--color-gray-50);
      font-size: var(--text-sm);
      color: var(--color-gray-900);
    }
    .search-input input:focus { outline: none; border-color: var(--color-primary-500); box-shadow: 0 0 0 3px var(--color-primary-100); background: var(--color-white); }
    .search-input svg { position: absolute; left: 10px; color: var(--color-gray-400); width: 16px; height: 16px; pointer-events: none; }
    .search-input kbd { position: absolute; right: 10px; font-size: 10px; color: var(--color-gray-500); border: 1px solid var(--color-gray-200); border-radius: 4px; padding: 2px 4px; background: var(--color-white); pointer-events: none; }

    /* Account Switcher (Simplified) */
    .account-summary { display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px; border-radius: var(--radius-md); width: 100%; text-align: left; background: transparent; border: none; }
    .account-summary:hover { background: var(--color-gray-100); }
    .avatar { width: 32px; height: 32px; border-radius: 50%; background: var(--color-primary-100); color: var(--color-primary-700); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 12px; }
    .account-text { display: flex; flex-direction: column; }
    .account-name { font-size: 14px; font-weight: 600; color: var(--color-gray-900); }
    .account-role { font-size: 12px; color: var(--color-gray-500); }

  </style>
</head>
<body>

  <!-- Accessible Skip Link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Mobile Overlay -->
  <div class="app-overlay" id="appOverlay" onclick="toggleMobileMenu()"></div>

  <!-- App Shell Container -->
  <div class="app-shell" id="appShell">
    
    <!-- Sidebar -->
    <aside class="app-sidebar" aria-label="Main Navigation">
      <div class="app-sidebar__header">
        <a href="#" class="logo">
          <div class="logo__icon"></div>
          <span>SaaS Platform</span>
        </a>
      </div>

      <nav class="app-sidebar__nav">
        <a href="#" class="nav-item nav-item--active" aria-current="page">
          <svg class="icon nav-item__icon" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
          <span>Dashboard</span>
        </a>
        <a href="#" class="nav-item">
          <svg class="icon nav-item__icon" viewBox="0 0 24 24"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
          <span>Analytics</span>
        </a>
        <a href="#" class="nav-item">
          <svg class="icon nav-item__icon" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
          <span>Customers</span>
        </a>
        <a href="#" class="nav-item">
          <svg class="icon nav-item__icon" viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
          <span>Orders</span>
        </a>
        <a href="#" class="nav-item">
          <svg class="icon nav-item__icon" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
          <span>Messages</span>
        </a>
      </nav>

      <div class="app-sidebar__footer">
        <button class="account-summary">
          <div class="avatar">NS</div>
          <div class="account-text">
            <span class="account-name">Nike Store</span>
            <span class="account-role">Owner</span>
          </div>
        </button>
      </div>
    </aside>

    <!-- Header -->
    <header class="app-header">
      <div class="app-header__left">
        <!-- Mobile Menu Trigger -->
        <button class="menu-trigger" aria-label="Open menu" onclick="toggleMobileMenu()">
          <svg class="icon" viewBox="0 0 24 24"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
        </button>
        
        <!-- Desktop Collapse Trigger -->
        <button class="collapse-trigger" aria-label="Toggle sidebar" onclick="toggleSidebar()">
          <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line></svg>
        </button>

        <!-- Global Search -->
        <div class="app-header__search">
          <div class="search-input">
            <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            <input type="text" placeholder="Search...">
            <kbd>âŒ˜ K</kbd>
          </div>
        </div>
      </div>

      <div class="app-header__actions">
        <button class="action-btn" aria-label="Notifications">
          <svg class="icon" viewBox="0 0 24 24"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
          <span class="notification-badge"></span>
        </button>
        <button class="action-btn" aria-label="Settings">
          <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="app-main" id="main-content">
      <div class="content-container">
        <!-- Content Placeholder to show scroll behavior -->
        <h1 style="font-size: 24px; font-weight: 700; margin-bottom: 24px;">Dashboard Overview</h1>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 32px;">
          <!-- Skeleton Cards simulating KPI Molecules -->
          <div style="background: white; border: 1px solid var(--color-gray-200); border-radius: 8px; height: 160px;"></div>
          <div style="background: white; border: 1px solid var(--color-gray-200); border-radius: 8px; height: 160px;"></div>
          <div style="background: white; border: 1px solid var(--color-gray-200); border-radius: 8px; height: 160px;"></div>
        </div>

        <div style="background: white; border: 1px solid var(--color-gray-200); border-radius: 8px; height: 400px; margin-bottom: 32px;">
          <div style="padding: 24px; border-bottom: 1px solid var(--color-gray-200); font-weight: 600;">Recent Orders</div>
        </div>
        
        <!-- Long content to test scroll -->
        <div style="height: 800px; background: white; border: 1px solid var(--color-gray-200); border-radius: 8px;"></div>
      </div>
    </main>

  </div>

  <section style="padding: 40px; background: white; border-top: 1px solid #e2e8f0; margin-top: 0;">
    <h2>Layout Variations</h2>
    <div style="display: flex; gap: 20px; margin-top: 20px;">
      
      <div>
        <h3>Variant: Authenticated (Default)</h3>
        <p>Standard shell with Sidebar and Sticky Header.</p>
        <button onclick="toggleSidebar()" style="padding: 8px 16px; background: #e2e8f0; border: none; border-radius: 4px; cursor: pointer; margin-top: 8px;">Toggle Desktop Collapse</button>
        <button onclick="toggleMobileMenu()" style="padding: 8px 16px; background: #e2e8f0; border: none; border-radius: 4px; cursor: pointer; margin-top: 8px;">Toggle Mobile Menu</button>
      </div>

    </div>
  </section>

  <script>
    // Simple state management for the demo
    const appShell = document.getElementById('appShell');
    
    // Desktop Collapse Toggle
    function toggleSidebar() {
      appShell.classList.toggle('app-shell--collapsed');
    }

    // Mobile Drawer Toggle
    function toggleMobileMenu() {
      appShell.classList.toggle('app-shell--mobile-open');
    }

    // Keyboard shortcut for search focus (Visual demo only)
    document.addEventListener('keydown', (e) => {
      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
        e.preventDefault();
        document.querySelector('.search-input input').focus();
      }
    });
  </script>
</body>
</html>