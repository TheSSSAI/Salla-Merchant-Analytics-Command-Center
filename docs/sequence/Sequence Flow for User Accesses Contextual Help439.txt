# 1 Overview

## 1.1 Diagram Id

SEQ-UJ-002

## 1.2 Name

User Accesses Contextual Help

## 1.3 Description

A user clicks a help icon next to a UI element (like a KPI on a dashboard). A popover appears with a concise explanation of the element. The popover includes a 'Learn More' link that directs the user to the relevant section of the online knowledge base.

## 1.4 Type

üîπ UserJourney

## 1.5 Purpose

To improve usability and user understanding by providing immediate, in-context information about application features and metrics, as detailed in user story US-060 and requirement REQ-TRN-003.

## 1.6 Complexity

Low

## 1.7 Priority

üü° Medium

## 1.8 Frequency

OnDemand

## 1.9 Participants

- user-browser
- spa-frontend-001

## 1.10 Key Interactions

- User tabs to or clicks a help icon.
- The SPA frontend displays a popover component adjacent to the icon.
- The content for the popover (title, description, link) is retrieved from a version-controlled JSON file bundled with the frontend.
- The popover is intelligently positioned to be fully visible within the viewport.
- User clicks the 'Learn More' link, and a new browser tab is opened to the corresponding knowledge base URL.
- User clicks outside the popover or presses the 'Escape' key, and the popover is dismissed.

## 1.11 Triggers

- User interaction with a help icon in the UI.

## 1.12 Outcomes

- The user receives an immediate, concise explanation of the UI element.
- User friction is reduced, and feature adoption is improved.
- Support ticket volume is potentially reduced.

## 1.13 Business Rules

- Help content for metrics must be consistent with the Data Dictionary (REQ-FUN-307).
- The component must be accessible via keyboard and screen readers, with appropriate aria-labels.

## 1.14 Error Scenarios

- A help icon is not rendered if its content is not defined, preventing empty popovers.

## 1.15 Integration Points

- Online Knowledge Base (via hyperlink).

# 2.0 Details

## 2.1 Diagram Id

SEQ-UJ-002

## 2.2 Name

User Accesses Contextual Help Component

## 2.3 Description

A comprehensive technical sequence detailing the end-to-end user journey for interacting with the contextual help system. This sequence covers user activation via mouse or keyboard, client-side state management, local content retrieval from a static asset, accessible component rendering, and dismissal logic. This directly implements the user story US-060 and the in-app guidance requirement REQ-TRN-003.

## 2.4 Participants

### 2.4.1 Actor

#### 2.4.1.1 Repository Id

user-browser

#### 2.4.1.2 Display Name

User Browser

#### 2.4.1.3 Type

üîπ Actor

#### 2.4.1.4 Technology

Standard Web Browser (Chrome, Firefox, Safari, Edge)

#### 2.4.1.5 Order

1

#### 2.4.1.6 Style

| Property | Value |
|----------|-------|
| Shape | actor |
| Color | #999999 |
| Stereotype | User |

### 2.4.2.0 Frontend Application

#### 2.4.2.1 Repository Id

spa-frontend-001

#### 2.4.2.2 Display Name

Frontend SPA

#### 2.4.2.3 Type

üîπ Frontend Application

#### 2.4.2.4 Technology

React 18, shadcn/ui, Zustand, TypeScript

#### 2.4.2.5 Order

2

#### 2.4.2.6 Style

| Property | Value |
|----------|-------|
| Shape | component |
| Color | #1168BD |
| Stereotype | React Component Tree |

## 2.5.0.0 Interactions

### 2.5.1.0 UI Event

#### 2.5.1.1 Source Id

user-browser

#### 2.5.1.2 Target Id

spa-frontend-001

#### 2.5.1.3 Message

User clicks the `HelpIcon` component or focuses it via keyboard and presses 'Enter'/'Space'.

#### 2.5.1.4 Sequence Number

1

#### 2.5.1.5 Type

üîπ UI Event

#### 2.5.1.6 Is Synchronous

‚úÖ Yes

#### 2.5.1.7 Return Message



#### 2.5.1.8 Has Return

‚ùå No

#### 2.5.1.9 Is Activation

‚úÖ Yes

#### 2.5.1.10 Technical Details

| Property | Value |
|----------|-------|
| Protocol | DOM Event |
| Method | onClick \| onKeyDown |
| Parameters | React.MouseEvent \| React.KeyboardEvent; helpConte... |
| Authentication | N/A (Client-side interaction) |
| Error Handling | N/A for user input event. |
| Performance | Standard browser event latency. |

### 2.5.2.0 State Update

#### 2.5.2.1 Source Id

spa-frontend-001

#### 2.5.2.2 Target Id

spa-frontend-001

#### 2.5.2.3 Message

Invokes `handleTogglePopover(true, 'aov_kpi')` event handler, updating component state (e.g., using `useState` or a Zustand store action) to set the popover's visibility and content ID.

#### 2.5.2.4 Sequence Number

2

#### 2.5.2.5 Type

üîπ State Update

#### 2.5.2.6 Is Synchronous

‚úÖ Yes

#### 2.5.2.7 Return Message



#### 2.5.2.8 Has Return

‚ùå No

#### 2.5.2.9 Is Activation

‚ùå No

#### 2.5.2.10 Technical Details

| Property | Value |
|----------|-------|
| Protocol | Internal Function Call |
| Method | setState({ isOpen: true, contentId: 'aov_kpi' }) |
| Parameters | New state object. |
| Authentication | N/A |
| Error Handling | Standard React error boundaries. |
| Performance | < 1ms |

### 2.5.3.0 Data Retrieval

#### 2.5.3.1 Source Id

spa-frontend-001

#### 2.5.3.2 Target Id

spa-frontend-001

#### 2.5.3.3 Message

Synchronously retrieves help content from a local, version-controlled `helpContent.json` map using the `contentId` ('aov_kpi') as the key.

#### 2.5.3.4 Sequence Number

3

#### 2.5.3.5 Type

üîπ Data Retrieval

#### 2.5.3.6 Is Synchronous

‚úÖ Yes

#### 2.5.3.7 Return Message

Returns `{ title, description, learnMoreUrl }` object.

#### 2.5.3.8 Has Return

‚úÖ Yes

#### 2.5.3.9 Is Activation

‚ùå No

#### 2.5.3.10 Technical Details

| Property | Value |
|----------|-------|
| Protocol | File System Access (Bundled Asset) |
| Method | helpContentMap['aov_kpi'] |
| Parameters | Key: string |
| Authentication | N/A |
| Error Handling | The component is conditionally rendered; it will n... |
| Performance | < 1ms |

### 2.5.4.0 UI Render

#### 2.5.4.1 Source Id

spa-frontend-001

#### 2.5.4.2 Target Id

spa-frontend-001

#### 2.5.4.3 Message

Triggers a component re-render. The `Popover` component from shadcn/ui is rendered with the retrieved content. Accessibility attributes are applied.

#### 2.5.4.4 Sequence Number

4

#### 2.5.4.5 Type

üîπ UI Render

#### 2.5.4.6 Is Synchronous

‚úÖ Yes

#### 2.5.4.7 Return Message



#### 2.5.4.8 Has Return

‚ùå No

#### 2.5.4.9 Is Activation

‚ùå No

#### 2.5.4.10 Technical Details

| Property | Value |
|----------|-------|
| Protocol | React Render Cycle |
| Method | React.createElement(Popover, ...) |
| Parameters | Popover content props, `aria-live`, etc. |
| Authentication | N/A |
| Error Handling | Handled by React's rendering engine and error boun... |
| Performance | Component render time should be < 16ms to avoid fr... |

### 2.5.5.0 UI Update

#### 2.5.5.1 Source Id

spa-frontend-001

#### 2.5.5.2 Target Id

user-browser

#### 2.5.5.3 Message

Displays the positioned `Popover` adjacent to the help icon, ensuring it is fully visible within the viewport.

#### 2.5.5.4 Sequence Number

5

#### 2.5.5.5 Type

üîπ UI Update

#### 2.5.5.6 Is Synchronous

‚úÖ Yes

#### 2.5.5.7 Return Message



#### 2.5.5.8 Has Return

‚ùå No

#### 2.5.5.9 Is Activation

‚ùå No

#### 2.5.5.10 Technical Details

| Property | Value |
|----------|-------|
| Protocol | DOM Manipulation |
| Method | Browser paint/composite |
| Parameters | Calculated CSS positioning (top, left, transform). |
| Authentication | N/A |
| Error Handling | N/A |
| Performance | Must appear in < 100ms from user click, as per NFR... |

### 2.5.6.0 Navigation

#### 2.5.6.1 Source Id

user-browser

#### 2.5.6.2 Target Id

user-browser

#### 2.5.6.3 Message

ALT: User clicks the 'Learn More' link within the popover.

#### 2.5.6.4 Sequence Number

6

#### 2.5.6.5 Type

üîπ Navigation

#### 2.5.6.6 Is Synchronous

‚úÖ Yes

#### 2.5.6.7 Return Message

Opens knowledge base URL in a new browser tab.

#### 2.5.6.8 Has Return

‚úÖ Yes

#### 2.5.6.9 Is Activation

‚ùå No

#### 2.5.6.10 Technical Details

| Property | Value |
|----------|-------|
| Protocol | HTML Navigation |
| Method | <a href='...' target='_blank' rel='noopener norefe... |
| Parameters | URL from `learnMoreUrl` |
| Authentication | N/A |
| Error Handling | Standard browser handling for invalid URLs. |
| Performance | Dependent on network and knowledge base server per... |

#### 2.5.6.11 Nested Interactions

*No items available*

### 2.5.7.0 UI Event

#### 2.5.7.1 Source Id

user-browser

#### 2.5.7.2 Target Id

spa-frontend-001

#### 2.5.7.3 Message

ALT: User clicks outside the popover or presses the 'Escape' key.

#### 2.5.7.4 Sequence Number

7

#### 2.5.7.5 Type

üîπ UI Event

#### 2.5.7.6 Is Synchronous

‚úÖ Yes

#### 2.5.7.7 Return Message



#### 2.5.7.8 Has Return

‚ùå No

#### 2.5.7.9 Is Activation

‚ùå No

#### 2.5.7.10 Technical Details

| Property | Value |
|----------|-------|
| Protocol | DOM Event |
| Method | onPointerDownOutside \| onEscapeKeyDown |
| Parameters | Event object |
| Authentication | N/A |
| Error Handling | N/A |
| Performance | Standard browser event latency. |

### 2.5.8.0 State Update

#### 2.5.8.1 Source Id

spa-frontend-001

#### 2.5.8.2 Target Id

spa-frontend-001

#### 2.5.8.3 Message

Invokes `handleTogglePopover(false)` event handler, updating state to set the popover's visibility to false.

#### 2.5.8.4 Sequence Number

8

#### 2.5.8.5 Type

üîπ State Update

#### 2.5.8.6 Is Synchronous

‚úÖ Yes

#### 2.5.8.7 Return Message



#### 2.5.8.8 Has Return

‚ùå No

#### 2.5.8.9 Is Activation

‚ùå No

#### 2.5.8.10 Technical Details

| Property | Value |
|----------|-------|
| Protocol | Internal Function Call |
| Method | setState({ isOpen: false }) |
| Parameters | New state object. |
| Authentication | N/A |
| Error Handling | Standard React error boundaries. |
| Performance | < 1ms |

### 2.5.9.0 UI Update

#### 2.5.9.1 Source Id

spa-frontend-001

#### 2.5.9.2 Target Id

user-browser

#### 2.5.9.3 Message

Component re-renders, removing the `Popover` from the DOM.

#### 2.5.9.4 Sequence Number

9

#### 2.5.9.5 Type

üîπ UI Update

#### 2.5.9.6 Is Synchronous

‚úÖ Yes

#### 2.5.9.7 Return Message



#### 2.5.9.8 Has Return

‚ùå No

#### 2.5.9.9 Is Activation

‚ùå No

#### 2.5.9.10 Technical Details

| Property | Value |
|----------|-------|
| Protocol | DOM Manipulation |
| Method | Browser paint/composite |
| Parameters | N/A |
| Authentication | N/A |
| Error Handling | N/A |
| Performance | < 16ms |

## 2.6.0.0 Notes

### 2.6.1.0 Content

#### 2.6.1.1 Content

Accessibility (REQ-INT-005): The `HelpIcon` component MUST be implemented as a focusable element (e.g., `<button>`) with a descriptive `aria-label` (e.g., 'Help for Average Order Value'). When the popover opens, focus should be managed appropriately and its content announced by screen readers.

#### 2.6.1.2 Position

top-right

#### 2.6.1.3 Participant Id

spa-frontend-001

#### 2.6.1.4 Sequence Number

4

### 2.6.2.0 Content

#### 2.6.2.1 Content

Positioning Logic: The underlying shadcn/ui `Popover` component handles automatic positioning to prevent viewport clipping. This logic must be verified across different screen sizes and icon locations during testing.

#### 2.6.2.2 Position

bottom-right

#### 2.6.2.3 Participant Id

spa-frontend-001

#### 2.6.2.4 Sequence Number

5

### 2.6.3.0 Content

#### 2.6.3.1 Content

Content Management: All help text is managed in a single, version-controlled `helpContent.json` file bundled with the frontend application. This avoids hardcoding strings and ensures content is updated atomically with code deployments.

#### 2.6.3.2 Position

top-left

#### 2.6.3.3 Participant Id

spa-frontend-001

#### 2.6.3.4 Sequence Number

3

## 2.7.0.0 Implementation Guidance

| Property | Value |
|----------|-------|
| Security Requirements | Content is sourced from a static, bundled JSON fil... |
| Performance Targets | The popover must appear in under 100ms from the us... |
| Error Handling Strategy | The primary error handling is preventative. A pare... |
| Testing Considerations | Unit test the `HelpIcon` and `Popover` wrapper com... |
| Monitoring Requirements | Implement analytics tracking to capture a `help_ic... |
| Deployment Considerations | The `helpContent.json` file must be included in th... |

