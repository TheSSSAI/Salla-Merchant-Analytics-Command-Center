"test_id","feature_area","test_type","test_level","priority","automation_candidate","automation_roi","test_description","business_risk","technical_complexity","preconditions","test_steps","expected_result","test_data_needs","tools_required","estimated_effort_hours","automation_effort_hours","maintenance_effort_annual","dependencies","environment_requirements","success_criteria","failure_impact","regression_frequency","data_setup_complexity","cleanup_requirements","security_considerations","performance_expectations","accessibility_requirements"
"TEST-AUTH-001","Authentication & Onboarding","Integration","API","Critical","true","High","Verify Salla OAuth 2.0 Authorization Code flow with state validation","Critical - Users cannot onboard or connect stores","High","Salla App credentials configured; Redis/Cookie state storage active","1. Call /api/salla/auth/url; 2. Validate returned state param; 3. Mock Salla callback with valid code & matching state; 4. Verify token exchange; 5. Verify encrypted storage in DB","Tokens exchanged successfully, encrypted in DB, user redirected to Onboarding","Mock Salla API responses; Crypto keys","Jest; Supertest; Nock (for Salla API mocking)","6","12","4","Salla Partner API; Database Encryption Service","Staging with Mocked External APIs","State mismatch returns 403; Valid flow returns 302","Blocker - Zero new user acquisition","Every release","Medium","Delete test merchant records","CSRF State Validation; Token Encryption at rest","Token exchange < 3s","N/A (API level)"
"TEST-DATA-001","Data Ingestion Pipeline","Non-Functional","System","High","true","Very High","Measure CDC Pipeline Latency from PostgreSQL commit to ClickHouse availability","High - Stale data violates 5-minute freshness SLA","High","CDC Publisher active; QStash configured; Consumer active","1. Insert 1000 Order records into Postgres; 2. Record timestamp; 3. Poll ClickHouse SalesFact table; 4. Measure time until all records appear","All records available in ClickHouse within 300 seconds","Synthetic Order Data (1k records)","k6; Custom Polling Script","8","16","8","Upstash QStash; ClickHouse Cloud","Performance/Staging Environment","p95 latency < 300s; Zero data loss","Major - Analytics untrustworthy","Every Sprint","High - Requires seeding OLTP","Truncate test partitions in ClickHouse","N/A","Throughput > 100 events/sec","N/A"
"TEST-SEC-001","Deep Analytics Engine","Security","Integration","Critical","true","High","Validate Tenant Isolation in Analytics API endpoints","Critical - Data leakage between merchants","Medium","Two distinct merchant accounts (A & B) with data","1. Authenticate as Merchant A; 2. Request Sales Report for Merchant B's ID; 3. Request Sales Report without merchant filter","API returns 403 Forbidden or data scoped strictly to Merchant A","Multi-tenant seed data","Jest; Supertest","4","6","2","Auth Middleware; Analytics Service","Integration Environment","Zero records returned from other tenants","Critical - Legal/Compliance violation","Every Commit","Medium","None","Horizontal Privilege Escalation (IDOR)","Auth check < 20ms","N/A"
"TEST-AI-001","AI Assistant (RAG)","Functional","System","High","true","Medium","Verify AI RAG Pipeline generates valid SQL and strips PII","High - AI hallucinations or PII leakage to OpenAI","Very High","pgvector populated; OpenAI API key active","1. Send query 'Show top customers by email'; 2. Intercept prompt sent to OpenAI; 3. Verify PII is masked; 4. Execute generated SQL against ClickHouse","Prompt contains schema but no actual emails; Generated SQL is valid ClickHouse syntax","Schema metadata; Sample queries","Custom AI Eval Script; OpenAI Mock","12","24","12","OpenAI API; Vector DB","Staging","SQL validity 95%; PII Leakage 0%","Major - AI feature unusable or unsafe","Every AI Release","High","None","Prompt Injection; PII Leakage","End-to-end response < 5s","N/A"
"TEST-REC-001","Cart Recovery","Functional","Integration","High","true","High","Verify Scheduler triggers email only after threshold and respects suppression","Medium - Spamming users or missing revenue","Medium","QStash Scheduler active; Postmark Mock","1. Create Cart A (Abandoned 59m ago); 2. Create Cart B (Abandoned 61m ago); 3. Create Cart C (Abandoned 61m ago but User Unsubscribed); 4. Run Scheduler Job","Email sent for Cart B only; Cart A skipped (too soon); Cart C skipped (suppressed)","Carts with specific timestamps; Suppression list entries","Jest; Database Mock","6","10","3","Cron Service; Email Service","Integration Environment","Exact targeting accuracy","Major - Customer annoyance or lost sales","Every Release","Medium","Clear job queue","Respect Unsubscribe","Job completes < 10s for batch","N/A"